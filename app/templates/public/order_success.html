{% include 'public_navbar.html' %}
<div class="container mx-auto px-2 md:px-8 flex flex-col items-center justify-center min-h-[60vh]">
    <div class="bg-white rounded-xl shadow-lg p-8 mt-16 max-w-md w-full text-center">
        
        <!-- Loading Animation (shows first) -->
        <div id="loading-animation" class="mb-4">
            <div class="mx-auto w-16 h-16 border-4 border-blue-200 border-t-blue-600 rounded-full animate-spin"></div>
            <p class="text-gray-600 mt-4 text-lg">Processing your order...</p>
        </div>

        <!-- Success Animation (shows after loading) -->
        <div id="success-animation" class="hidden">
            <div class="mx-auto mb-4 w-16 h-16 text-green-500 success-icon-container">
                <svg class="success-checkmark" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <circle cx="12" cy="12" r="10" stroke-width="2" class="success-circle"/>
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M9 12l2 2 4-4" class="success-check"/>
                </svg>
            </div>
            <h2 class="font-bold text-2xl mb-2 text-gray-900 success-text">Order Placed Successfully!</h2>
            <p class="text-gray-700 mb-4 success-text">Your order ID is <span class="font-semibold text-blue-600">{{ order_id }}</span>.</p>
            <div class="success-buttons">
                <a href="{{ url_for('public.download_order', slug=restaurant.slug, order_id=order_id) }}" class="inline-block bg-blue-600 text-white font-semibold rounded-lg px-6 py-2 shadow hover:bg-blue-700 transition-all mb-2 mr-2">Download Order</a>
                <a href="{{ url_for('public.menu', slug=restaurant.slug) }}" class="inline-block bg-gray-200 text-gray-700 font-semibold rounded-lg px-6 py-2 shadow hover:bg-gray-300 transition-all">Back to Menu</a>
            </div>
        </div>
    </div>
</div>

<style>
/* Loading spinner animation */
@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

.animate-spin {
    animation: spin 1s linear infinite;
}

/* Success animations */
.success-circle {
    stroke-dasharray: 63;
    stroke-dashoffset: 63;
    animation: circle-draw 0.8s ease-out forwards;
}

.success-check {
    stroke-dasharray: 12;
    stroke-dashoffset: 12;
    animation: check-draw 0.5s ease-out 0.8s forwards;
}

@keyframes circle-draw {
    to {
        stroke-dashoffset: 0;
    }
}

@keyframes check-draw {
    to {
        stroke-dashoffset: 0;
    }
}

.success-text {
    opacity: 0;
    transform: translateY(20px);
    animation: fade-in-up 0.6s ease-out 1.3s forwards;
}

.success-buttons {
    opacity: 0;
    transform: translateY(20px);
    animation: fade-in-up 0.6s ease-out 1.6s forwards;
}

@keyframes fade-in-up {
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* Scale effect for success icon */
.success-icon-container {
    transform: scale(0.5);
    animation: scale-in 0.5s ease-out 0.5s forwards;
}

@keyframes scale-in {
    to {
        transform: scale(1);
    }
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Show loading for 2 seconds
    setTimeout(function() {
        // Hide loading animation
        document.getElementById('loading-animation').style.display = 'none';
        
        // Show success animation
        document.getElementById('success-animation').classList.remove('hidden');
        
        // Add a subtle bounce effect to the container
        const container = document.querySelector('.bg-white');
        container.style.transform = 'scale(0.95)';
        container.style.transition = 'transform 0.3s ease-out';
        
        setTimeout(function() {
            container.style.transform = 'scale(1)';
        }, 100);
        
    }, 2000); // 2 second delay for loading
});
</script>